<div class="profile-header">
  <div class="header-left">
    <div class="avatar-wrapper">
      @if (userImage && !imageError()) {
        <img
          [src]="userImage"
          [alt]="userName + '\'s avatar'"
          class="avatar-image"
          (error)="onImageError()"
          (load)="onImageLoad()"
          [class.loaded]="imageLoaded()"
        />
      } @else {
        <div class="avatar-initials">
          {{ userInitials }}
        </div>
      }
      
      @if (showTierBadge) {
        <div class="tier-badge">
          <span class="tier-icon">{{ tier.badge }}</span>
        </div>
      }
    </div>

    <div class="user-info">
      <h2 class="user-name">{{ userName }}</h2>
      @if (userEmail) {
        <p class="user-email">{{ userEmail }}</p>
      }
      @if (formattedPhoneNumber) {
        <p class="user-phone">{{ formattedPhoneNumber }}</p>
      }
      <p class="location-date">{{ locationDate }}</p>
    </div>
  </div>

  <div class="header-actions">
    @if (isNotBuyer) {
      <button
        class="return-earn-btn"
        [attr.aria-label]="translation.t('Return & Earn') || 'Return & Earn'"
        (click)="onReturnEarnClick()"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
        </svg>
        {{ translation.t('Return & Earn') || 'Return & Earn' }}
      </button>
    }
    <a
      routerLink="/profile/edit"
      class="edit-profile-btn"
        [attr.aria-label]="translation.t('Edit Profile') || 'Edit Profile'"
    >
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
      </svg>
      {{ translation.t('Edit Profile') || 'Edit Profile' }}
    </a>
  </div>
</div>

