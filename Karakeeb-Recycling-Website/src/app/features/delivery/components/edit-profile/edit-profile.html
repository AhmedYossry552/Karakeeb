<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8">
  <!-- Loading state -->
  <div *ngIf="loading()" class="flex items-center justify-center min-h-screen">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
  </div>

  <!-- Main content -->
  <div *ngIf="!loading() && user()" class="max-w-2xl mx-auto px-6">
    <!-- Header with back button -->
    <div class="flex items-center gap-4 mb-6">
      <button
        (click)="goBack()"
        class="p-2 hover:bg-white rounded-lg transition-colors"
      >
        <fa-icon [icon]="faArrowLeft" class="text-2xl text-gray-700"></fa-icon>
      </button>
      <div>
        <h1 class="text-3xl font-bold text-gray-900">Edit Profile</h1>
        <p class="text-gray-600 text-sm">Update your delivery profile information</p>
      </div>
    </div>

    <!-- Profile Card -->
    <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-100">
      <!-- Profile Image Section -->
      <div class="flex flex-col items-center mb-8">
        <div class="relative inline-block mb-4">
          <div class="w-24 h-24 rounded-full overflow-hidden shadow-lg border-4 border-white bg-gradient-to-br from-blue-400 to-purple-500">
            <img
              *ngIf="imagePreview()"
              [src]="imagePreview()"
              alt="Profile"
              class="w-full h-full object-cover"
            />
            <div
              *ngIf="!imagePreview()"
              class="w-full h-full flex items-center justify-center text-white font-bold text-3xl"
            >
              {{ getInitials(user()?.name || 'U') }}
            </div>
          </div>
          <!-- Camera icon button -->
          <label class="absolute bottom-0 right-0 p-2 bg-blue-600 rounded-full text-white cursor-pointer hover:bg-blue-700 shadow-lg transition-colors">
            <fa-icon [icon]="faCamera" class="w-4 h-4"></fa-icon>
            <input type="file" (change)="onFileSelected($event)" accept="image/*" class="hidden" />
          </label>
        </div>
        <p class="text-sm text-gray-500 mt-2">Click camera icon to change photo</p>
      </div>

      <!-- Form Section -->
      <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">
        <!-- Name Field -->
        <div class="mb-6">
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            <fa-icon [icon]="faUser" class="mr-2 text-blue-600"></fa-icon>
            Full Name
          </label>
          <input
            type="text"
            formControlName="name"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
            placeholder="Enter your full name"
          />
          <p *ngIf="profileForm.get('name')?.invalid && profileForm.get('name')?.touched" class="text-red-500 text-sm mt-1">
            Name must be at least 2 characters
          </p>
        </div>

        <!-- Email Field (Read-only) -->
        <div class="mb-6">
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            <fa-icon [icon]="faEnvelope" class="mr-2 text-blue-600"></fa-icon>
            Email Address
          </label>
          <input
            type="email"
            [value]="user()?.email"
            disabled
            class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"
            placeholder="Email cannot be changed"
          />
          <p class="text-xs text-gray-500 mt-1">Email cannot be changed</p>
        </div>

        <!-- Phone Field -->
        <div class="mb-6">
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            <fa-icon [icon]="faPhone" class="mr-2 text-blue-600"></fa-icon>
            Phone Number
          </label>
          <input
            type="tel"
            formControlName="phoneNumber"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
            placeholder="+1 (555) 000-0000"
          />
          <p *ngIf="profileForm.get('phoneNumber')?.invalid && profileForm.get('phoneNumber')?.touched" class="text-red-500 text-sm mt-1">
            Please enter a valid phone number
          </p>
        </div>

        <!-- Bio Field -->
        <div class="mb-8">
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            <fa-icon [icon]="faTruck" class="mr-2 text-blue-600"></fa-icon>
            Bio / About (Optional)
          </label>
          <textarea
            formControlName="bio"
            rows="4"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none"
            placeholder="Tell customers about yourself and your delivery experience..."
          ></textarea>
          <p class="text-xs text-gray-500 mt-1">
            {{ profileForm.get('bio')?.value?.length || 0 }} / 500 characters
          </p>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-4">
          <button
            type="button"
            (click)="goBack()"
            class="flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors"
          >
            Cancel
          </button>
          <button
            type="submit"
            [disabled]="profileForm.invalid || saving()"
            class="flex-1 px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:opacity-60 transition-colors flex items-center justify-center gap-2"
          >
            <fa-icon [icon]="faSave" class="w-4 h-4"></fa-icon>
            {{ saving() ? 'Saving...' : 'Save Changes' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
